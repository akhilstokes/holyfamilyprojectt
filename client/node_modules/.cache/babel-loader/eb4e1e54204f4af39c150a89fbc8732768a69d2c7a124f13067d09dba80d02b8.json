{"ast":null,"code":"import _objectSpread from\"G:/holy-family-polymers/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{GoogleLogin}from'@react-oauth/google';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[formData,setFormData]=useState({email:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const{login,googleSignIn}=useAuth();const{email,password}=formData;const onChange=e=>setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));const validateForm=()=>{const emailRegex=/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;if(!email||!password){setError('Please enter both email and password.');return false;}if(!emailRegex.test(email)){setError('Please enter a valid email address.');return false;}setError('');return true;};const handleGoogleSignInSuccess=async credentialResponse=>{try{setLoading(true);setError('');const result=await googleSignIn(credentialResponse.credential);if(result.user.role==='admin'){navigate('/admin/home');}else{navigate('/user/home');}}catch(err){setError('Google Sign-In failed. Please try again.');}finally{setLoading(false);}};const onSubmit=async e=>{e.preventDefault();if(validateForm()){try{setLoading(true);setError('');const result=await login(email,password);if(result.user.role==='admin'){navigate('/admin/home');}else{navigate('/user/home');}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message||'An error occurred during login.');}finally{setLoading(false);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/logo.png\",alt:\"Company Logo\",className:\"company-logo\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Login to Your Account\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"email\",placeholder:\"Email Address\",name:\"email\",value:email,onChange:onChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",placeholder:\"Password\",name:\"password\",value:password,onChange:onChange,required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",type:\"submit\",disabled:loading,children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'20px 0',color:'#888'},children:\"OR\"}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleSignInSuccess,onError:()=>setError('Google Sign-In failed. Please try again.'),disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","Link","GoogleLogin","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","formData","setFormData","email","password","error","setError","loading","setLoading","navigate","login","googleSignIn","onChange","e","_objectSpread","target","name","value","validateForm","emailRegex","test","handleGoogleSignInSuccess","credentialResponse","result","credential","user","role","err","onSubmit","preventDefault","_err$response","_err$response$data","response","data","message","className","children","src","alt","type","placeholder","required","disabled","style","textAlign","margin","color","onSuccess","onError","to"],"sources":["G:/holy-family-polymers/client/src/pages/auth/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst LoginPage = () => {\r\n    const [formData, setFormData] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n    const { login, googleSignIn } = useAuth();\r\n\r\n    const { email, password } = formData;\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n    const validateForm = () => {\r\n        const emailRegex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n\r\n        if (!email || !password) {\r\n            setError('Please enter both email and password.');\r\n            return false;\r\n        }\r\n        if (!emailRegex.test(email)) {\r\n            setError('Please enter a valid email address.');\r\n            return false;\r\n        }\r\n        setError('');\r\n        return true;\r\n    };\r\n    \r\n    const handleGoogleSignInSuccess = async (credentialResponse) => {\r\n        try {\r\n            setLoading(true);\r\n            setError('');\r\n            \r\n            const result = await googleSignIn(credentialResponse.credential);\r\n            \r\n            if (result.user.role === 'admin') {\r\n                navigate('/admin/home');\r\n            } else {\r\n                navigate('/user/home');\r\n            }\r\n        } catch (err) {\r\n            setError('Google Sign-In failed. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (validateForm()) {\r\n            try {\r\n                setLoading(true);\r\n                setError('');\r\n                \r\n                const result = await login(email, password);\r\n                \r\n                if (result.user.role === 'admin') {\r\n                    navigate('/admin/home');\r\n                } else {\r\n                    navigate('/user/home');\r\n                }\r\n            } catch (err) {\r\n                setError(err.response?.data?.message || err.message || 'An error occurred during login.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"auth-wrapper\">\r\n            <div className=\"form-container\">\r\n                \r\n                {/* âœ… Company Logo */}\r\n                <div className=\"logo-container\">\r\n                    <img \r\n                        src=\"/images/logo.png\" \r\n                        alt=\"Company Logo\" \r\n                        className=\"company-logo\"\r\n                    />\r\n                </div>\r\n\r\n                <h2>Login to Your Account</h2>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                <form onSubmit={onSubmit}>\r\n                    <div className=\"input-group\">\r\n                        <input className=\"form-input\" type=\"email\" placeholder=\"Email Address\" name=\"email\" value={email} onChange={onChange} required />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <input className=\"form-input\" type=\"password\" placeholder=\"Password\" name=\"password\" value={password} onChange={onChange} required />\r\n                    </div>\r\n                    <button className=\"form-button\" type=\"submit\" disabled={loading}>\r\n                        {loading ? 'Logging in...' : 'Login'}\r\n                    </button>\r\n                </form>\r\n \r\n                <div style={{ textAlign: 'center', margin: '20px 0', color: '#888' }}>OR</div>\r\n                \r\n                <GoogleLogin\r\n                    onSuccess={handleGoogleSignInSuccess}\r\n                    onError={() => setError('Google Sign-In failed. Please try again.')}\r\n                    disabled={loading}\r\n                />\r\n\r\n                <div className=\"auth-links\">\r\n                    <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n                    <span>Don't have an account? <Link to=\"/register\">Register here</Link></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}