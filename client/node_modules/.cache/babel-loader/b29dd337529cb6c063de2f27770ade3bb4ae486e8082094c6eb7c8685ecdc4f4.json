{"ast":null,"code":"import _objectSpread from\"G:/holy-family-polymers/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{GoogleLogin}from'@react-oauth/google';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[formData,setFormData]=useState({email:'',password:''});const[error,setError]=useState('');const navigate=useNavigate();const{email,password}=formData;const onChange=e=>setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));const validateForm=()=>{const emailRegex=/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;if(!email||!password){setError('Please enter both email and password.');return false;}if(!emailRegex.test(email)){setError('Please enter a valid email address.');return false;}setError('');return true;};const handleGoogleSignInSuccess=async credentialResponse=>{try{const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL||'http://localhost:5000',\"/api/auth/google-signin\"),{token:credentialResponse.credential});localStorage.setItem('token',res.data.token);localStorage.setItem('user',JSON.stringify(res.data.user));if(res.data.user.role==='admin'){navigate('/admin/home');}else{navigate('/user/home');}}catch(err){setError('Google Sign-In failed. Please try again.');}};const onSubmit=async e=>{e.preventDefault();if(validateForm()){try{const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL||'http://localhost:5000',\"/api/auth/login\"),formData);localStorage.setItem('token',res.data.token);localStorage.setItem('user',JSON.stringify(res.data.user));if(res.data.user.role==='admin'){navigate('/admin/home');}else{navigate('/user/home');}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'An error occurred during login.');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/logo.png\",alt:\"Company Logo\",className:\"company-logo\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Login to Your Account\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"email\",placeholder:\"Email Address\",name:\"email\",value:email,onChange:onChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",placeholder:\"Password\",name:\"password\",value:password,onChange:onChange,required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'20px 0',color:'#888'},children:\"OR\"}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleSignInSuccess,onError:()=>{setError('Google Sign-In failed. Please try again.');},useOneTap:true}),/*#__PURE__*/_jsx(\"p\",{className:\"form-text\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"form-text\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"15px\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"back-home-btn\",children:\"\\u2B05 Back to Home\"})})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","Link","GoogleLogin","jsx","_jsx","jsxs","_jsxs","LoginPage","formData","setFormData","email","password","error","setError","navigate","onChange","e","_objectSpread","target","name","value","validateForm","emailRegex","test","handleGoogleSignInSuccess","credentialResponse","res","post","concat","process","env","REACT_APP_API_URL","token","credential","localStorage","setItem","data","JSON","stringify","user","role","err","onSubmit","preventDefault","_err$response","_err$response$data","response","message","className","children","src","alt","type","placeholder","required","style","textAlign","margin","color","onSuccess","onError","useOneTap","to","marginTop"],"sources":["G:/holy-family-polymers/client/src/pages/auth/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\n\r\nconst LoginPage = () => {\r\n    const [formData, setFormData] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const { email, password } = formData;\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n    const validateForm = () => {\r\n        const emailRegex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n\r\n        if (!email || !password) {\r\n            setError('Please enter both email and password.');\r\n            return false;\r\n        }\r\n        if (!emailRegex.test(email)) {\r\n            setError('Please enter a valid email address.');\r\n            return false;\r\n        }\r\n        setError('');\r\n        return true;\r\n    };\r\n    \r\n    const handleGoogleSignInSuccess = async (credentialResponse) => {\r\n        try {\r\n            const res = await axios.post(\r\n                `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/auth/google-signin`, \r\n                {\r\n                    token: credentialResponse.credential,\r\n                }\r\n            );\r\n\r\n            localStorage.setItem('token', res.data.token);\r\n            localStorage.setItem('user', JSON.stringify(res.data.user));\r\n\r\n            if (res.data.user.role === 'admin') {\r\n                navigate('/admin/home');\r\n            } else {\r\n                navigate('/user/home');\r\n            }\r\n        } catch (err) {\r\n            setError('Google Sign-In failed. Please try again.');\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (validateForm()) {\r\n            try {\r\n                const res = await axios.post(\r\n                    `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/auth/login`, \r\n                    formData\r\n                );\r\n                localStorage.setItem('token', res.data.token);\r\n                localStorage.setItem('user', JSON.stringify(res.data.user));\r\n                if (res.data.user.role === 'admin') {\r\n                    navigate('/admin/home');\r\n                } else {\r\n                    navigate('/user/home');\r\n                }\r\n            } catch (err) {\r\n                setError(err.response?.data?.message || 'An error occurred during login.');\r\n            }\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"auth-wrapper\">\r\n            <div className=\"form-container\">\r\n                \r\n                {/* ✅ Company Logo */}\r\n                <div className=\"logo-container\">\r\n                    <img \r\n                        src=\"/images/logo.png\" \r\n                        alt=\"Company Logo\" \r\n                        className=\"company-logo\"\r\n                    />\r\n                </div>\r\n\r\n                <h2>Login to Your Account</h2>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                <form onSubmit={onSubmit}>\r\n                    <div className=\"input-group\">\r\n                        <input className=\"form-input\" type=\"email\" placeholder=\"Email Address\" name=\"email\" value={email} onChange={onChange} required />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <input className=\"form-input\" type=\"password\" placeholder=\"Password\" name=\"password\" value={password} onChange={onChange} required />\r\n                    </div>\r\n                    <button className=\"form-button\" type=\"submit\">Login</button>\r\n                </form>\r\n \r\n                <div style={{ textAlign: 'center', margin: '20px 0', color: '#888' }}>OR</div>\r\n                \r\n                <GoogleLogin\r\n                    onSuccess={handleGoogleSignInSuccess}\r\n                    onError={() => {\r\n                        setError('Google Sign-In failed. Please try again.');\r\n                    }}\r\n                    useOneTap\r\n                />\r\n\r\n                <p className=\"form-text\">\r\n                    <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n                </p>\r\n                <p className=\"form-text\">\r\n                    Don't have an account? <Link to=\"/register\">Register here</Link>\r\n                </p>\r\n\r\n                {/* ⬅ Back to Home Button */}\r\n                <div style={{ marginTop: \"15px\", textAlign: \"center\" }}>\r\n                    <Link to=\"/\" className=\"back-home-btn\">\r\n                        ⬅ Back to Home\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}