{"ast":null,"code":"import _objectSpread from\"G:/holy-family-polymers/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{validateName,validateEmail,validatePhoneNumber,validatePassword,cleanPhoneNumber}from'../../utils/validation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const[formData,setFormData]=useState({name:'',email:'',phoneNumber:'',password:''});const[errors,setErrors]=useState({});const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const{name,email,phoneNumber,password}=formData;const onChange=e=>{const{name,value}=e.target;if(name==='password'&&value.includes(' ')){return;}setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));if(errors[name]){setErrors(_objectSpread(_objectSpread({},errors),{},{[name]:''}));}};const handleKeyDown=e=>{if(e.target.name==='password'&&e.key===' '){e.preventDefault();}};const validateForm=()=>{const newErrors={};const nameError=validateName(name);const emailError=validateEmail(email);const phoneError=validatePhoneNumber(phoneNumber);const passwordError=validatePassword(password);if(nameError)newErrors.name=nameError;if(emailError)newErrors.email=emailError;if(phoneError)newErrors.phoneNumber=phoneError;if(passwordError)newErrors.password=passwordError;setErrors(newErrors);return Object.keys(newErrors).length===0;};const onSubmit=async e=>{e.preventDefault();setIsLoading(true);if(validateForm()){try{const finalPhoneNumber=cleanPhoneNumber(phoneNumber);const registrationData=_objectSpread(_objectSpread({},formData),{},{phoneNumber:finalPhoneNumber});const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL||'http://localhost:5000',\"/api/auth/register\"),registrationData);alert('Registration successful! Please log in.');navigate('/login');}catch(err){var _err$response,_err$response$data;console.error('Registration error:',err);if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.errors){setErrors(err.response.data.errors);}else{var _err$response2,_err$response2$data;setErrors({general:((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'An error occurred during registration.'});}}}setIsLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/logo.png\",alt:\"Company Logo\",className:\"company-logo\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Register Your Account\"}),errors.general&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.general}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-input \".concat(errors.name?'error':''),type:\"text\",placeholder:\"Full Name (letters, spaces, dots allowed)\",name:\"name\",value:name,onChange:onChange,maxLength:50}),errors.name&&/*#__PURE__*/_jsx(\"div\",{className:\"field-error\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-input \".concat(errors.email?'error':''),type:\"email\",placeholder:\"Email Address\",name:\"email\",value:email,onChange:onChange}),errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"field-error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-input \".concat(errors.phoneNumber?'error':''),type:\"text\",placeholder:\"Phone Number (10 digits or +91 9876543210)\",name:\"phoneNumber\",value:phoneNumber,onChange:onChange,maxLength:15}),errors.phoneNumber&&/*#__PURE__*/_jsx(\"div\",{className:\"field-error\",children:errors.phoneNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-input \".concat(errors.password?'error':''),type:\"password\",placeholder:\"Password (letters, numbers, special chars, no spaces)\",name:\"password\",value:password,onChange:onChange,onKeyDown:handleKeyDown}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"field-error\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",type:\"submit\",disabled:isLoading,children:isLoading?'Registering...':'Register'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"form-text\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login here\"})]})]})});};export default RegisterPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","Link","validateName","validateEmail","validatePhoneNumber","validatePassword","cleanPhoneNumber","jsx","_jsx","jsxs","_jsxs","RegisterPage","formData","setFormData","name","email","phoneNumber","password","errors","setErrors","isLoading","setIsLoading","navigate","onChange","e","value","target","includes","_objectSpread","handleKeyDown","key","preventDefault","validateForm","newErrors","nameError","emailError","phoneError","passwordError","Object","keys","length","onSubmit","finalPhoneNumber","registrationData","res","post","concat","process","env","REACT_APP_API_URL","alert","err","_err$response","_err$response$data","console","error","response","data","_err$response2","_err$response2$data","general","message","className","children","src","alt","type","placeholder","maxLength","onKeyDown","disabled","to"],"sources":["G:/holy-family-polymers/client/src/pages/auth/RegisterPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { \n    validateName, \n    validateEmail, \n    validatePhoneNumber, \n    validatePassword,\n    cleanPhoneNumber \n} from '../../utils/validation';\n\nconst RegisterPage = () => {\n    const [formData, setFormData] = useState({\n        name: '',\n        email: '',\n        phoneNumber: '',\n        password: '',\n    });\n    const [errors, setErrors] = useState({});\n    const [isLoading, setIsLoading] = useState(false);\n    const navigate = useNavigate();\n\n    const { name, email, phoneNumber, password } = formData;\n\n    const onChange = (e) => {\n        const { name, value } = e.target;\n        \n        if (name === 'password' && value.includes(' ')) {\n            return;\n        }\n        \n        setFormData({ ...formData, [name]: value });\n        if (errors[name]) {\n            setErrors({ ...errors, [name]: '' });\n        }\n    };\n\n    const handleKeyDown = (e) => {\n        if (e.target.name === 'password' && e.key === ' ') {\n            e.preventDefault();\n        }\n    };\n\n    const validateForm = () => {\n        const newErrors = {};\n        \n        const nameError = validateName(name);\n        const emailError = validateEmail(email);\n        const phoneError = validatePhoneNumber(phoneNumber);\n        const passwordError = validatePassword(password);\n        \n        if (nameError) newErrors.name = nameError;\n        if (emailError) newErrors.email = emailError;\n        if (phoneError) newErrors.phoneNumber = phoneError;\n        if (passwordError) newErrors.password = passwordError;\n        \n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n        \n        if (validateForm()) {\n            try {\n                const finalPhoneNumber = cleanPhoneNumber(phoneNumber);\n\n                const registrationData = {\n                    ...formData,\n                    phoneNumber: finalPhoneNumber\n                };\n\n                const res = await axios.post(\n                    `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/auth/register`,\n                    registrationData\n                );\n                alert('Registration successful! Please log in.');\n                navigate('/login');\n            } catch (err) {\n                console.error('Registration error:', err);\n                if (err.response?.data?.errors) {\n                    setErrors(err.response.data.errors);\n                } else {\n                    setErrors({\n                        general: err.response?.data?.message || 'An error occurred during registration.'\n                    });\n                }\n            }\n        }\n        setIsLoading(false);\n    };\n\n    return (\n        <div className=\"auth-wrapper\">\n            <div className=\"form-container\">\n\n                {/* âœ… Company Logo */}\n                <div className=\"logo-container\">\n                    <img \n                        src=\"/images/logo.png\" \n                        alt=\"Company Logo\" \n                        className=\"company-logo\"\n                    />\n                </div>\n\n                <h2>Register Your Account</h2>\n                {errors.general && <div className=\"error-message\">{errors.general}</div>}\n                <form onSubmit={onSubmit}>\n                    <div className=\"input-group\">\n                        <input\n                            className={`form-input ${errors.name ? 'error' : ''}`}\n                            type=\"text\"\n                            placeholder=\"Full Name (letters, spaces, dots allowed)\"\n                            name=\"name\"\n                            value={name}\n                            onChange={onChange}\n                            maxLength={50}\n                        />\n                        {errors.name && <div className=\"field-error\">{errors.name}</div>}\n                    </div>\n                    <div className=\"input-group\">\n                        <input\n                            className={`form-input ${errors.email ? 'error' : ''}`}\n                            type=\"email\"\n                            placeholder=\"Email Address\"\n                            name=\"email\"\n                            value={email}\n                            onChange={onChange}\n                        />\n                        {errors.email && <div className=\"field-error\">{errors.email}</div>}\n                    </div>\n                    <div className=\"input-group\">\n                        <input\n                            className={`form-input ${errors.phoneNumber ? 'error' : ''}`}\n                            type=\"text\"\n                            placeholder=\"Phone Number (10 digits or +91 9876543210)\"\n                            name=\"phoneNumber\"\n                            value={phoneNumber}\n                            onChange={onChange}\n                            maxLength={15}\n                        />\n                        {errors.phoneNumber && <div className=\"field-error\">{errors.phoneNumber}</div>}\n                    </div>\n                    <div className=\"input-group\">\n                        <input\n                            className={`form-input ${errors.password ? 'error' : ''}`}\n                            type=\"password\"\n                            placeholder=\"Password (letters, numbers, special chars, no spaces)\"\n                            name=\"password\"\n                            value={password}\n                            onChange={onChange}\n                            onKeyDown={handleKeyDown}\n                        />\n                        {errors.password && <div className=\"field-error\">{errors.password}</div>}\n                    </div>\n                    <button \n                        className=\"form-button\" \n                        type=\"submit\"\n                        disabled={isLoading}\n                    >\n                        {isLoading ? 'Registering...' : 'Register'}\n                    </button>\n                </form>\n                <p className=\"form-text\">\n                    Already have an account? <Link to=\"/login\">Login here</Link>\n                </p>\n            </div>\n        </div>\n        \n    );\n};\n\nexport default RegisterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}