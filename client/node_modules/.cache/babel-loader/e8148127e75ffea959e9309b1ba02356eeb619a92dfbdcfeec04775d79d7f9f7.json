{"ast":null,"code":"import _objectSpread from\"G:/holy-family-polymers/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageShifts=()=>{const[shifts,setShifts]=useState([]);const[staffList,setStaffList]=useState([]);const[formData,setFormData]=useState({shiftType:'Morning',date:'',assignedStaff:''});const[error,setError]=useState('');const[message,setMessage]=useState('');const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};// Fetch existing shifts and staff list on component mount\nuseEffect(()=>{const fetchShiftsAndStaff=async()=>{try{const[shiftsRes,staffRes]=await Promise.all([axios.get('/api/admin/shifts',config),axios.get('/api/admin/staff',config)]);setShifts(shiftsRes.data);setStaffList(staffRes.data);if(staffRes.data.length>0){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{assignedStaff:staffRes.data[0]._id}));}}catch(err){setError('Failed to load data.');}};fetchShiftsAndStaff();},[]);const onChange=e=>setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));const onSubmit=async e=>{e.preventDefault();setError('');setMessage('');try{await axios.post('/api/admin/shifts',formData,config);setMessage('Shift assigned successfully!');// Refresh shifts list\nconst{data}=await axios.get('/api/admin/shifts',config);setShifts(data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to assign shift.');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Staff Shifts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",style:{maxWidth:'600px',marginBottom:'40px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Assign New Shift\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green'},children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Shift Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"shiftType\",value:formData.shiftType,onChange:onChange,className:\"form-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Morning\",children:\"Morning\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Evening\",children:\"Evening\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:onChange,className:\"form-input\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Assign to Staff\"}),/*#__PURE__*/_jsx(\"select\",{name:\"assignedStaff\",value:formData.assignedStaff,onChange:onChange,className:\"form-input\",required:true,children:staffList.map(staff=>/*#__PURE__*/_jsx(\"option\",{value:staff._id,children:staff.name},staff._id))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-button\",children:\"Assign Shift\"})]})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Assigned Shifts\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"dashboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Shift Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Assigned Staff\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:shifts.map(shift=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(shift.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:shift.shiftType}),/*#__PURE__*/_jsx(\"td\",{children:shift.assignedStaff?shift.assignedStaff.name:'N/A'})]},shift._id))})]})]});};export default ManageShifts;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ManageShifts","shifts","setShifts","staffList","setStaffList","formData","setFormData","shiftType","date","assignedStaff","error","setError","message","setMessage","token","localStorage","getItem","config","headers","Authorization","concat","fetchShiftsAndStaff","shiftsRes","staffRes","Promise","all","get","data","length","prev","_objectSpread","_id","err","onChange","e","target","name","value","onSubmit","preventDefault","post","_err$response","_err$response$data","response","children","className","style","maxWidth","marginBottom","color","type","required","map","staff","shift","Date","toLocaleDateString"],"sources":["G:/holy-family-polymers/client/src/pages/admin_dashboard/ManageShifts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ManageShifts = () => {\r\n    const [shifts, setShifts] = useState([]);\r\n    const [staffList, setStaffList] = useState([]);\r\n    const [formData, setFormData] = useState({ shiftType: 'Morning', date: '', assignedStaff: '' });\r\n    const [error, setError] = useState('');\r\n    const [message, setMessage] = useState('');\r\n\r\n    const token = localStorage.getItem('token');\r\n    const config = { headers: { Authorization: `Bearer ${token}` } };\r\n\r\n    // Fetch existing shifts and staff list on component mount\r\n    useEffect(() => {\r\n        const fetchShiftsAndStaff = async () => {\r\n            try {\r\n                const [shiftsRes, staffRes] = await Promise.all([\r\n                    axios.get('/api/admin/shifts', config),\r\n                    axios.get('/api/admin/staff', config)\r\n                ]);\r\n                setShifts(shiftsRes.data);\r\n                setStaffList(staffRes.data);\r\n                if (staffRes.data.length > 0) {\r\n                    setFormData(prev => ({ ...prev, assignedStaff: staffRes.data[0]._id }));\r\n                }\r\n            } catch (err) {\r\n                setError('Failed to load data.');\r\n            }\r\n        };\r\n        fetchShiftsAndStaff();\r\n    }, []);\r\n\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n    const onSubmit = async e => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setMessage('');\r\n        try {\r\n            await axios.post('/api/admin/shifts', formData, config);\r\n            setMessage('Shift assigned successfully!');\r\n            // Refresh shifts list\r\n            const { data } = await axios.get('/api/admin/shifts', config);\r\n            setShifts(data);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Failed to assign shift.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Manage Staff Shifts</h2>\r\n            \r\n            {/* Assign Shift Form */}\r\n            <div className=\"form-container\" style={{ maxWidth: '600px', marginBottom: '40px' }}>\r\n                <h3>Assign New Shift</h3>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                {message && <div style={{ color: 'green' }}>{message}</div>}\r\n                <form onSubmit={onSubmit}>\r\n                    <div className=\"input-group\">\r\n                        <label>Shift Type</label>\r\n                        <select name=\"shiftType\" value={formData.shiftType} onChange={onChange} className=\"form-input\">\r\n                            <option value=\"Morning\">Morning</option>\r\n                            <option value=\"Evening\">Evening</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label>Date</label>\r\n                        <input type=\"date\" name=\"date\" value={formData.date} onChange={onChange} className=\"form-input\" required />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <label>Assign to Staff</label>\r\n                        <select name=\"assignedStaff\" value={formData.assignedStaff} onChange={onChange} className=\"form-input\" required>\r\n                            {staffList.map(staff => (\r\n                                <option key={staff._id} value={staff._id}>{staff.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    <button type=\"submit\" className=\"form-button\">Assign Shift</button>\r\n                </form>\r\n            </div>\r\n\r\n            {/* Display Assigned Shifts */}\r\n            <h3>Assigned Shifts</h3>\r\n            <table className=\"dashboard-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Date</th>\r\n                        <th>Shift Type</th>\r\n                        <th>Assigned Staff</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {shifts.map(shift => (\r\n                        <tr key={shift._id}>\r\n                            <td>{new Date(shift.date).toLocaleDateString()}</td>\r\n                            <td>{shift.shiftType}</td>\r\n                            <td>{shift.assignedStaff ? shift.assignedStaff.name : 'N/A'}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageShifts;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}