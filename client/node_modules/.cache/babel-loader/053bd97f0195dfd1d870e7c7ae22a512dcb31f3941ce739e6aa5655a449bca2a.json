{"ast":null,"code":"import axios from 'axios';\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Graceful API wrapper with fallback\nconst safeGet = async (url, opts = {}, fallback = null) => {\n  try {\n    const res = await axios.get(url, opts);\n    return res.data;\n  } catch {\n    return fallback;\n  }\n};\nexport const fetchProducts = async (params = {}) => {\n  const data = await safeGet(`${API}/api/products`, {\n    params\n  }, null);\n  if (data && data.success) return data.products;\n  // Fallback mock\n  return [{\n    _id: 'm1',\n    name: 'Sample Raw Material',\n    type: 'raw',\n    category: 'center',\n    price: 120,\n    imageUrl: '',\n    description: 'Sample description'\n  }, {\n    _id: 'm2',\n    name: 'Sample Finished Good',\n    type: 'finished',\n    category: 'shop',\n    price: 220,\n    imageUrl: '',\n    description: 'Sample description'\n  }, {\n    _id: 'm3',\n    name: 'Sample Accessory',\n    type: 'accessory',\n    category: 'shop',\n    price: 60,\n    imageUrl: '',\n    description: 'Sample description'\n  }];\n};\nexport const placeOrder = async payload => {\n  try {\n    const res = await axios.post(`${API}/api/orders`, payload, {\n      withCredentials: true\n    });\n    return res.data;\n  } catch (e) {\n    // Mock immediate success\n    return {\n      success: true,\n      order: {\n        _id: 'mock-order',\n        ...payload,\n        status: 'pending'\n      }\n    };\n  }\n};\nexport const fetchMyOrders = async () => {\n  const data = await safeGet(`${API}/api/orders/my`, {\n    withCredentials: true\n  }, null);\n  if (data && data.success) return data.orders;\n  return [];\n};\nexport const createRazorpayOrder = async orderId => {\n  try {\n    const res = await axios.post(`${API}/api/orders/${orderId}/pay/razorpay`, {}, {\n      withCredentials: true\n    });\n    return res.data;\n  } catch (e) {\n    var _e$response, _e$response$data;\n    return {\n      success: false,\n      message: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to create payment order'\n    };\n  }\n};\nexport const verifyRazorpayPayment = async (orderId, payload) => {\n  try {\n    const res = await axios.post(`${API}/api/orders/${orderId}/pay/razorpay/verify`, payload, {\n      withCredentials: true\n    });\n    return res.data;\n  } catch (e) {\n    var _e$response2, _e$response2$data;\n    return {\n      success: false,\n      message: (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Payment verification failed'\n    };\n  }\n};","map":{"version":3,"names":["axios","API","process","env","REACT_APP_API_URL","safeGet","url","opts","fallback","res","get","data","fetchProducts","params","success","products","_id","name","type","category","price","imageUrl","description","placeOrder","payload","post","withCredentials","e","order","status","fetchMyOrders","orders","createRazorpayOrder","orderId","_e$response","_e$response$data","message","response","verifyRazorpayPayment","_e$response2","_e$response2$data"],"sources":["G:/holy-family-polymers/client/src/services/storeService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n// Graceful API wrapper with fallback\r\nconst safeGet = async (url, opts = {}, fallback = null) => {\r\n  try {\r\n    const res = await axios.get(url, opts);\r\n    return res.data;\r\n  } catch {\r\n    return fallback;\r\n  }\r\n};\r\n\r\nexport const fetchProducts = async (params = {}) => {\r\n  const data = await safeGet(`${API}/api/products`, { params }, null);\r\n  if (data && data.success) return data.products;\r\n  // Fallback mock\r\n  return [\r\n    { _id: 'm1', name: 'Sample Raw Material', type: 'raw', category: 'center', price: 120, imageUrl: '', description: 'Sample description' },\r\n    { _id: 'm2', name: 'Sample Finished Good', type: 'finished', category: 'shop', price: 220, imageUrl: '', description: 'Sample description' },\r\n    { _id: 'm3', name: 'Sample Accessory', type: 'accessory', category: 'shop', price: 60, imageUrl: '', description: 'Sample description' },\r\n  ];\r\n};\r\n\r\nexport const placeOrder = async (payload) => {\r\n  try {\r\n    const res = await axios.post(`${API}/api/orders`, payload, { withCredentials: true });\r\n    return res.data;\r\n  } catch (e) {\r\n    // Mock immediate success\r\n    return { success: true, order: { _id: 'mock-order', ...payload, status: 'pending' } };\r\n  }\r\n};\r\n\r\nexport const fetchMyOrders = async () => {\r\n  const data = await safeGet(`${API}/api/orders/my`, { withCredentials: true }, null);\r\n  if (data && data.success) return data.orders;\r\n  return [];\r\n};\r\n\r\nexport const createRazorpayOrder = async (orderId) => {\r\n  try {\r\n    const res = await axios.post(`${API}/api/orders/${orderId}/pay/razorpay`, {}, { withCredentials: true });\r\n    return res.data;\r\n  } catch (e) {\r\n    return { success: false, message: e?.response?.data?.message || 'Failed to create payment order' };\r\n  }\r\n};\r\n\r\nexport const verifyRazorpayPayment = async (orderId, payload) => {\r\n  try {\r\n    const res = await axios.post(`${API}/api/orders/${orderId}/pay/razorpay/verify`, payload, { withCredentials: true });\r\n    return res.data;\r\n  } catch (e) {\r\n    return { success: false, message: e?.response?.data?.message || 'Payment verification failed' };\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}