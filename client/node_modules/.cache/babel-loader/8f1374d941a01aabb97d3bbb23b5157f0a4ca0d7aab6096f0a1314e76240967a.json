{"ast":null,"code":"var _jsxFileName = \"G:\\\\holy-family-polymers\\\\client\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useMemo, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [items, setItems] = useState([]); // items: {productId, name, type, category, price, quantity}\n\n  const addItem = (product, qty = 1) => {\n    setItems(prev => {\n      const idx = prev.findIndex(i => i.productId === product._id);\n      if (idx !== -1) {\n        const copy = [...prev];\n        copy[idx] = {\n          ...copy[idx],\n          quantity: copy[idx].quantity + qty\n        };\n        return copy;\n      }\n      return [...prev, {\n        productId: product._id,\n        name: product.name,\n        type: product.type,\n        category: product.category,\n        price: product.price,\n        quantity: qty\n      }];\n    });\n  };\n  const removeItem = productId => setItems(prev => prev.filter(i => i.productId !== productId));\n  const updateQty = (productId, qty) => {\n    setItems(prev => prev.map(i => i.productId === productId ? {\n      ...i,\n      quantity: Math.max(1, qty)\n    } : i));\n  };\n  const clearCart = () => setItems([]);\n  const totals = useMemo(() => {\n    const subtotal = items.reduce((sum, i) => sum + i.price * i.quantity, 0);\n    return {\n      subtotal\n    };\n  }, [items]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items,\n      addItem,\n      removeItem,\n      updateQty,\n      clearCart,\n      totals\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"D0NeCdslkfnCOwmcOHRNhW0LCPY=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useMemo","useState","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","items","setItems","addItem","product","qty","prev","idx","findIndex","i","productId","_id","copy","quantity","name","type","category","price","removeItem","filter","updateQty","map","Math","max","clearCart","totals","subtotal","reduce","sum","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["G:/holy-family-polymers/client/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useMemo, useState } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [items, setItems] = useState([]); // items: {productId, name, type, category, price, quantity}\r\n\r\n  const addItem = (product, qty = 1) => {\r\n    setItems(prev => {\r\n      const idx = prev.findIndex(i => i.productId === product._id);\r\n      if (idx !== -1) {\r\n        const copy = [...prev];\r\n        copy[idx] = { ...copy[idx], quantity: copy[idx].quantity + qty };\r\n        return copy;\r\n      }\r\n      return [\r\n        ...prev,\r\n        {\r\n          productId: product._id,\r\n          name: product.name,\r\n          type: product.type,\r\n          category: product.category,\r\n          price: product.price,\r\n          quantity: qty,\r\n        },\r\n      ];\r\n    });\r\n  };\r\n\r\n  const removeItem = (productId) => setItems(prev => prev.filter(i => i.productId !== productId));\r\n\r\n  const updateQty = (productId, qty) => {\r\n    setItems(prev => prev.map(i => (i.productId === productId ? { ...i, quantity: Math.max(1, qty) } : i)));\r\n  };\r\n\r\n  const clearCart = () => setItems([]);\r\n\r\n  const totals = useMemo(() => {\r\n    const subtotal = items.reduce((sum, i) => sum + i.price * i.quantity, 0);\r\n    return { subtotal };\r\n  }, [items]);\r\n\r\n  return (\r\n    <CartContext.Provider value={{ items, addItem, removeItem, updateQty, clearCart, totals }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}