{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./AdminDashboard.css';// We'll create this file for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BillRequests=()=>{const[bills,setBills]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const fetchBills=async()=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const{data}=await axios.get('/api/admin/bills',config);setBills(data);}catch(err){setError('Failed to fetch bill requests.');}finally{setLoading(false);}};useEffect(()=>{fetchBills();},[]);const handleStatusUpdate=async(id,status)=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};await axios.put(\"/api/admin/bills/\".concat(id),{status},config);// Refresh the list after updating\nfetchBills();}catch(err){setError('Failed to update status.');}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Bill Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Supplier Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Latex Volume (kg)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DRC (%)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bills.map(bill=>{var _bill$supplier;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(bill.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:((_bill$supplier=bill.supplier)===null||_bill$supplier===void 0?void 0:_bill$supplier.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:bill.latexVolume}),/*#__PURE__*/_jsx(\"td\",{children:bill.drcPercentage}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",bill.calculatedAmount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(bill.status),children:bill.status})}),/*#__PURE__*/_jsx(\"td\",{children:bill.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:()=>handleStatusUpdate(bill._id,'approved'),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleStatusUpdate(bill._id,'rejected'),children:\"Reject\"})]})})]},bill._id);})})]})})]});};export default BillRequests;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BillRequests","bills","setBills","loading","setLoading","error","setError","fetchBills","token","localStorage","getItem","config","headers","Authorization","concat","data","get","err","handleStatusUpdate","id","status","put","children","className","map","bill","_bill$supplier","Date","createdAt","toLocaleDateString","supplier","name","latexVolume","drcPercentage","calculatedAmount","toFixed","onClick","_id"],"sources":["G:/holy-family-polymers/client/src/pages/admin_dashboard/BillRequests.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './AdminDashboard.css'; // We'll create this file for styling\r\n\r\nconst BillRequests = () => {\r\n    const [bills, setBills] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    const fetchBills = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const config = {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            };\r\n            const { data } = await axios.get('/api/admin/bills', config);\r\n            setBills(data);\r\n        } catch (err) {\r\n            setError('Failed to fetch bill requests.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchBills();\r\n    }, []);\r\n\r\n    const handleStatusUpdate = async (id, status) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const config = {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            };\r\n            await axios.put(`/api/admin/bills/${id}`, { status }, config);\r\n            // Refresh the list after updating\r\n            fetchBills();\r\n        } catch (err) {\r\n            setError('Failed to update status.');\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading...</p>;\r\n    if (error) return <p className=\"error-message\">{error}</p>;\r\n\r\n    return (\r\n        <div className=\"admin-content\">\r\n            <h2>Manage Bill Requests</h2>\r\n            <div className=\"table-container\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Date</th>\r\n                            <th>Supplier Name</th>\r\n                            <th>Latex Volume (kg)</th>\r\n                            <th>DRC (%)</th>\r\n                            <th>Amount (₹)</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {bills.map((bill) => (\r\n                            <tr key={bill._id}>\r\n                                <td>{new Date(bill.createdAt).toLocaleDateString()}</td>\r\n                                <td>{bill.supplier?.name || 'N/A'}</td>\r\n                                <td>{bill.latexVolume}</td>\r\n                                <td>{bill.drcPercentage}</td>\r\n                                <td>₹{bill.calculatedAmount.toFixed(2)}</td>\r\n                                <td>\r\n                                    <span className={`status-badge status-${bill.status}`}>\r\n                                        {bill.status}\r\n                                    </span>\r\n                                </td>\r\n                                <td>\r\n                                    {bill.status === 'pending' && (\r\n                                        <div className=\"action-buttons\">\r\n                                            <button \r\n                                                className=\"btn btn-success\"\r\n                                                onClick={() => handleStatusUpdate(bill._id, 'approved')}\r\n                                            >\r\n                                                Approve\r\n                                            </button>\r\n                                            <button \r\n                                                className=\"btn btn-danger\"\r\n                                                onClick={() => handleStatusUpdate(bill._id, 'rejected')}\r\n                                            >\r\n                                                Reject\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BillRequests;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}