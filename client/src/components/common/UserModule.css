/* User Module Container */
.user-module {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    background: var(--surface-base);
    padding: 10px 16px; /* tighter vertical padding for stable height */
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(17, 24, 39, 0.08);
    border: 1px solid var(--border-subtle);
    width: 100%; /* ensure full width inside header */
}

.user-module-left,
.user-module-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Top Icons Section */
.user-module-icons {
    display: flex;
    align-items: center;
    gap: 10px;
}

.icon-btn {
    background: var(--surface-alt);
    border: 1px solid var(--border-subtle);
    color: #0f172a;
    font-size: 16px;
    padding: 0;
    border-radius: 12px; /* rounded-square tile */
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px; /* consistent tile size */
    height: 40px;
    box-shadow: inset 0 0 0 0 rgba(0,0,0,0);
}

.icon-btn:hover {
    background: color-mix(in oklab, var(--role-primary, #3b82f6) 10%, var(--surface-alt));
    transform: translateY(-1px);
}

.icon-btn:active {
    transform: translateY(0);
}

.notification-btn { position: relative; }

.notification-badge {
    position: absolute;
    top: 3px;
    right: 3px;
    width: 8px;
    height: 8px;
    background: #ff4757;
    border-radius: 50%;
    border: 2px solid white;
}

/* Profile Section */
.user-module-profile { display: flex; align-items: center; gap: 8px; }
.profile-info { display: flex; align-items: center; gap: 8px; cursor: pointer; }
.profile-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--surface-alt); display: flex; align-items: center; justify-content: center; color: #0f172a; font-size: 16px; overflow: hidden; border: 1px solid var(--border-subtle); }
.profile-avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
.profile-details { display: flex; flex-direction: column; }
.profile-name { color: #0f172a; font-weight: 600; font-size: 13px; letter-spacing: 0.4px; }

/* Profile Menu */
.profile-menu { position: relative; }
.profile-dropdown-btn { background: transparent; border: none; color: #0f172a; font-size: 16px; padding: 6px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; }
.profile-dropdown-btn:hover { background: var(--surface-alt); }
.profile-dropdown { position: absolute; right: 0; top: calc(100% + 8px); min-width: 200px; background: white; border: 1px solid #e5e7eb; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); padding: 8px; z-index: 1000; animation: dropdownFadeIn 0.2s ease-out; }
@keyframes dropdownFadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
.dropdown-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 8px; color: #374151; text-decoration: none; font-weight: 500; font-size: 14px; transition: all 0.2s ease; border: none; background: none; width: 100%; text-align: left; cursor: pointer; }
.dropdown-item:hover { background: #f3f4f6; color: #1f2937; }
.dropdown-item i { width: 16px; text-align: center; color: #6b7280; }
.logout-item { background: var(--role-primary, #3b82f6); color: white; margin-top: 4px; font-weight: 600; }
.logout-item:hover { background: var(--role-dark, #1e40af); color: white; }
.logout-item i { color: white; }

/* Responsive */
@media (max-width: 768px) {
    .user-module { padding: 8px 10px; gap: 10px; }
    .icon-btn { width: 36px; height: 36px; font-size: 14px; }
    .profile-avatar { width: 32px; height: 32px; font-size: 14px; }
    .profile-name { font-size: 12px; }
}

@media (max-width: 480px) {
    .user-module { flex-wrap: wrap; }
    .user-module-right { margin-left: auto; }
}

/* Badge animation */
.notification-badge { animation: pulse 2s infinite; }
@keyframes pulse { 0%{transform:scale(1);opacity:1;} 50%{transform:scale(1.1);opacity:.85;} 100%{transform:scale(1);opacity:1;} }

/* Focus states */
.icon-btn:focus, .profile-dropdown-btn:focus, .dropdown-item:focus { outline: 2px solid rgba(255,255,255,0.5); outline-offset: 2px; }

/* Loading */
.user-module.loading { opacity: 0.7; pointer-events: none; }
.user-module.loading .icon-btn, .user-module.loading .profile-dropdown-btn { cursor: not-allowed; }
